FROM mcr.microsoft.com/dotnet/aspnet:5.0

# RUN ["apt-get", "update"]
# RUN ["apt-get", "install", "-y", "vim"]

RUN echo "alias ll='ls -al --color'" >> ~/.bashrc

COPY ./built_server_app/ app/
RUN mkdir -p app/client-app/build
COPY ./built_client_app/ app/client-app/build/

WORKDIR /app

ENV ASPNETCORE_ENVIRONMENT=Production
ENV CORE_HOST=localhost
ENV CORE_PORT=80
ENV WEATHER_HOST=localhost
ENV WEATHER_PORT=80

EXPOSE 80
EXPOSE 443

ENTRYPOINT ["dotnet", "Omega.dll"]
